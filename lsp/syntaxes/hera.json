{
  "scopeName": "source.hera",
  "patterns": [
    {
      "include": "#rule"
    },
    {
      "include": "#expression"
    }
  ],
  "repository": {
    "expression": {
      "patterns": [
        {
          "include": "#identifier"
        },
        {
          "include": "#handler"
        },
        {
          "include": "#string"
        }
      ]
    },
    "rule": {
      "match": "^[_a-zA-Z][_a-zA-Z0-9]*\\s*$",
      "name": "support.class.hera"
    },
    "escaped_char": {
      "match": "\\.",
      "name": "character.escape.hera"
    },
    "identifier": {
      "match": "[_a-zA-Z][_a-zA-Z0-9]*",
      "name": "identifier"
    },
    "handler": {
      "begin": "->",
      "beginCaptures": {
        "0": {
          "name": "storage.hera"
        }
      },
      "contentName": "meta.embedded.block.javascript",
      "end": "^(?=[_a-zA-Z])|^(  )(?=[_a-zA-Z/(\"])",
      "endCaptures": {
        "2": "indent"
      },
      "patterns": [{
        "include": "source.js"
      }]
    },
    "qstring-double": {
      "name": "string.quoted.double.hera",
      "begin": "\"",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.string.begin.hera"
        }
      },
      "end": "(\")|((?:[^\\\\\\n])$)",
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.string.end.hera"
        },
        "2": {
          "name": "invalid.illegal.newline.hera"
        }
      },
      "patterns": [
        {
          "include": "#string-character-escape"
        }
      ]
    },
    "string": {
      "patterns": [
        {
          "include": "#qstring-double"
        }
      ]
    },
    "string-character-escape": {
      "name": "constant.character.escape.js",
      "match": "\\\\(x\\h{2}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.|$)"
    }
  }
}
